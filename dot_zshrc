# Essentials for ZSH

export ZSH="$HOME/.oh-my-zsh"

# Language configuration

export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# Appearance settings

ZSH_THEME="" # Disabled in favor of pure theme installed by zplug
zstyle ':omz:update' mode auto  # Update theme automatically without asking

DISABLE_AUTO_TITLE="true" # Disable auto-setting terminal title.

# Command history options

HISTORY_IGNORE='(ls|cd|pwd|exit|date|history)' # Make some commands not show up in history
HIST_STAMPS="dd.mm.yyyy" # Command execution timestamp shown in the history command output (see 'man strftime' for details)
HISTSIZE=10000 # Limit of the lines to keep track of in history
SAVEHIST=10000 # Limit of the command size to keep track of in history
setopt APPEND_HISTORY # adds history
setopt HIST_IGNORE_ALL_DUPS # If a new command line being added to the history list duplicates an older one, the older command is removed from the list
setopt HIST_IGNORE_SPACE # No history when starting command with space
setopt HIST_SAVE_NO_DUPS # When writing out the history file, older commands that duplicate newer ones are omitted

# Store all history dotfiles in dedicated directory

SHELL_SESSION_DIR="$HOME/.cache/.zsh_sessions"
SHELL_SESSION_FILE="$SHELL_SESSION_DIR/$TERM_SESSION_ID.session"                                                    
mkdir -m 700 -p "$SHELL_SESSION_DIR"

export HISTFILE="$HOME/.cache/.zsh_history"
export LESSHISTFILE="$XDG_STATE_HOME"/less/history
export PYTHON_HISTORY=~/.cache/.python_history
export ZSH_COMPDUMP="$HOME/.cache/.zcompdump-$HOST"

# Configure ZSH with the above settings

source $ZSH/oh-my-zsh.sh

# Load plugins

[ -f ~/.zplug.sh ] && source ~/.zplug.sh

# Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='nano'
else
  export EDITOR='code --wait --new-window'
fi

# Functions to overwrite standard utilities

function cat() {
    bat --theme=default "$@"
}

function ls() {
    eza -a --icons --no-user --no-time "$@"
}
